(this["webpackJsonptest-movie-front.ru"]=this["webpackJsonptest-movie-front.ru"]||[]).push([[0],{41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(19),r=c.n(i),s=c(11),l=c(3),o=(c(41),c(42),c(43),c.p+"static/media/preloader.817176e3.png"),j=c(0);var d=function(e){var t=e.genre,c=e.className;return Object(j.jsxs)("span",{className:c,children:[t," ",Object(j.jsx)("br",{})]})},m=c(17);var u=function(e){var t=e.img,c=e.preloader,n=a.a.useState(!1),i=Object(m.a)(n,2),r=i[0],s=i[1],l=new Image;return l.src=t,l.onload=function(){s(!0)},r?Object(j.jsx)("img",{src:t,alt:""}):Object(j.jsx)("img",{src:c,alt:""})};var b=function(e){var t=e.movies;return Object(j.jsx)("div",{className:"cart__items",children:Object(j.jsxs)(s.b,{to:"/cart/".concat(t.id),children:[Object(j.jsx)("div",{className:"cart__inner",children:Object(j.jsxs)("div",{className:"cart__img",children:[Object(j.jsxs)("div",{className:"cart__info",children:[Object(j.jsxs)("div",{className:"cart__info-img",children:[Object(j.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(j.jsx)("g",{clipPath:"url(#clip0)",children:Object(j.jsx)("path",{d:"M31.9166 12.2751C31.7071 11.6271 31.1324 11.1669 30.4524 11.1056L21.2164 10.267L17.5642 1.71865C17.2949 1.09217 16.6816 0.686646 16.0002 0.686646C15.3188 0.686646 14.7055 1.09217 14.4362 1.72012L10.784 10.267L1.54642 11.1056C0.867694 11.1684 0.294437 11.6271 0.0837383 12.2751C-0.12696 12.923 0.0676246 13.6338 0.581066 14.0818L7.56245 20.2045L5.5038 29.2728C5.35316 29.9396 5.61196 30.6288 6.16519 31.0287C6.46256 31.2436 6.81047 31.353 7.16131 31.353C7.46381 31.353 7.76387 31.2714 8.03316 31.1103L16.0002 26.3487L23.9642 31.1103C24.547 31.4609 25.2817 31.4289 25.8337 31.0287C26.3871 30.6276 26.6457 29.9381 26.4951 29.2728L24.4364 20.2045L31.4178 14.083C31.9312 13.6338 32.1273 12.9243 31.9166 12.2751Z",fill:"#299DED"})}),Object(j.jsx)("defs",{children:Object(j.jsx)("clipPath",{id:"clip0",children:Object(j.jsx)("rect",{width:"32",height:"32",fill:"white"})})})]}),Object(j.jsx)("span",{className:"cart__rating",children:0===t.rating?"No ratings":t.rating.toFixed(1)})]}),Object(j.jsx)("div",{className:"cart__genres",children:t.genres&&t.genres.map((function(e,t,c){return t<4?Object(j.jsx)(d,{className:"cart__genre",genre:e},t):null}))}),Object(j.jsx)("div",{className:"cart__button",children:"More"})]}),Object(j.jsx)(u,{img:t.large_cover_image,preloader:o})]})}),Object(j.jsxs)("div",{className:"cart__subtitle",children:[Object(j.jsx)("div",{className:"cart__title",children:t.title_english}),Object(j.jsx)("div",{className:"cart__year",children:t.year})]})]})})};c(50);var h=function(e){var t=e.title,c=e.nav;return Object(j.jsx)("div",{className:"header",children:Object(j.jsxs)("div",{className:"container container__header",children:[Object(j.jsx)("h1",{className:"header__title",children:t}),Object(j.jsx)("nav",{className:"nav",children:c})]})})};c(51);var O=function(e){var t=e.children,c=e.onClick,n=e.className;return Object(j.jsx)("button",{onClick:c,className:n,children:t})};c(52);var v=function(){return Object(j.jsx)("div",{className:"spin-wrapper",children:Object(j.jsx)("div",{className:"spinner"})})},f=c(10),x=c(18),p=c.n(x),_=c(26),g=c(27),C=c.n(g),N=c(8),w="SET_ITEMS",L="SET_IS_FETCHING",y="SET_CURRENT_PAGE",E="SET_FETCH_ERROR",M="SET_CURRENT_MOVIE",S="SET_IS_LOADED_MOVIE",I={items:[],isFetching:!0,currentPage:1,perPage:20,totalCount:0,isFetchingError:!1,currentMovie:null,isLoadedMovie:!1};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(N.a)(Object(N.a)({},e),{},{items:t.payload.data,isFetching:!0,totalCount:t.payload.data.movie_count,isLoadedMovie:!0});case L:return Object(N.a)(Object(N.a)({},e),{},{isFetching:t.payload});case y:return Object(N.a)(Object(N.a)({},e),{},{currentPage:t.payload});case E:return Object(N.a)(Object(N.a)({},e),{},{isFetchingError:t.payload});case M:return Object(N.a)(Object(N.a)({},e),{},{currentMovie:t.payload});case S:return Object(N.a)(Object(N.a)({},e),{},{isLoadedMovie:t.payload});default:return e}},D=function(e){return{type:w,payload:e}},F=function(e){return{type:L,payload:e}},T=function(e){return{type:M,payload:e}},P=function(e){return{type:S,payload:e}};var H=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.films.items})).movies,c=Object(f.c)((function(e){return e.films})),n=c.isFetching,i=c.currentPage,r=c.perPage,s=c.totalCount;a.a.useEffect((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return function(){var c=Object(_.a)(p.a.mark((function c(n){var a;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n(T(null)),n(F(!1)),n(P(!1)),c.next=6,C.a.get("https://yts.mx/api/v2/list_movies.json?&page=".concat(e,"&limit=").concat(t));case 6:a=c.sent,n(D(a.data)),c.next=14;break;case 10:c.prev=10,c.t0=c.catch(0),console.log(c.t0),n(F(!0));case 14:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}(i,r))}),[i]);var l=[];return function(e,t,c){if(t>3)if(c>2)for(var n=c-1;n<=c+1&&(e.push(n),n!==t);n++);else for(var a=1;a<=3&&(e.push(a),a!==t);a++);else for(var i=1;i<=t;i++)e.push(i)}(l,Math.ceil(s/r),i),Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)(h,{title:"Movies",nav:l.map((function(t,c){return Object(j.jsx)(O,{onClick:function(){return e({type:y,payload:t})},className:t===i?"nav__link active":"nav__link",children:t},c)}))}),n?Object(j.jsx)("div",{className:"main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"cart",children:t&&t.map((function(e,t){return Object(j.jsx)(b,{movies:e},t)}))})})}):Object(j.jsx)(v,{})]})},B=(c(72),c(14));c(73);var R=function(e){var t=e.value,c=e.date,n=e.author,a=e.id,i=e.fn;return Object(j.jsx)("div",{className:"comment",children:Object(j.jsxs)("div",{className:"comment__body",children:[Object(j.jsxs)("div",{className:"comment__info",children:[Object(j.jsx)("div",{className:"comment__author",children:n}),Object(j.jsx)("div",{className:"comment__date",children:c})]}),Object(j.jsx)("div",{className:"comment__value",children:t}),Object(j.jsx)("div",{className:"delete__button",onClick:function(){return i(a)}})]})})};var Z=function(){var e=Object(f.c)((function(e){return e.films})).currentMovie.id,t=a.a.useRef(null);function c(e){var t=localStorage.getItem("comments")||"[]",c=JSON.parse(t),n=c.find((function(t){return t.filmId===e}))||{filmId:e,comments:[]};return{commentsDB:c,currentMovieComments:n}}function i(t){if(t.preventDefault(),o.trim()){var n=c(e),a=n.commentsDB,i=n.currentMovieComments,r=new Date;r.toLocaleDateString();var s,l={id:Math.floor(1e4*Math.random()),date:r.toLocaleDateString(),author:"You",value:o};i.comments=[l].concat(Object(B.a)(i.comments)),s=a.some((function(t){return t.filmId===e}))?Object(B.a)(a.map((function(t){return t.filmId===e?i:t}))):[].concat(Object(B.a)(a),[i]),localStorage.setItem("comments",JSON.stringify(s)),O(i),d("")}}function r(t){var n=c(e),a=n.commentsDB,i=n.currentMovieComments;i.comments=Object(B.a)(i.comments.filter((function(e){return e.id!==t})));var r=Object(B.a)(a.map((function(t){return t.filmId===e?i:t})));localStorage.setItem("comments",JSON.stringify(r)),O(i)}var s=Object(n.useState)(""),l=Object(m.a)(s,2),o=l[0],d=l[1],u=Object(n.useState)(null),b=Object(m.a)(u,2),h=b[0],O=b[1];return Object(n.useEffect)((function(){var t=c(e).currentMovieComments;O(t||null)}),[]),Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)("div",{className:"comment__body",children:h?h.comments.map((function(e,t){return Object(j.jsx)(R,{date:e.date,author:e.author,value:e.value,id:e.id,fn:r},t)})):"No comments"}),Object(j.jsx)("form",{onSubmit:i,className:"form",children:Object(j.jsxs)("div",{className:"form__wrapper",children:[Object(j.jsx)("textarea",{name:"text",ref:t,value:o,onChange:function(e){return d(e.target.value)},placeholder:"Leave a comment",className:"form__textarea"}),Object(j.jsx)("button",{onSubmit:i,className:"back form__submit",children:Object(j.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(j.jsx)("path",{d:"M6.68981 13.7414L2.28356 8.69754L6.68981 3.6537C7.04588 3.24565 7.00434 2.62601 6.5963 2.26962C6.18825 1.91355 5.56894 1.95541 5.21222 2.36313L0.242297 8.0524C-0.0807656 8.42187 -0.0807656 8.97349 0.242297 9.34296L5.21227 15.0323C5.40647 15.2539 5.6782 15.3678 5.95153 15.3678C6.18042 15.3678 6.41025 15.288 6.5963 15.1255C7.00439 14.7691 7.0462 14.1494 6.68981 13.7414Z",fill:"white"}),Object(j.jsx)("path",{d:"M16.8717 7.71655H0.980906C0.439125 7.71655 0 8.15563 0 8.69746C0 9.23924 0.439125 9.67837 0.980906 9.67837H16.8717C19.7206 9.67837 22.0382 11.9959 22.0382 14.8445C22.0382 17.6931 19.7206 20.0106 16.8717 20.0106H2.28881C1.74703 20.0106 1.30791 20.4498 1.30791 20.9916C1.30791 21.5333 1.74703 21.9725 2.28881 21.9725H16.8717C20.8019 21.9725 24 18.7747 24 14.8445C24 10.9143 20.8022 7.71655 16.8717 7.71655Z",fill:"white"})]})})]})})]})};var J=function(e){var t=Object(f.b)(),c=Object(f.c)((function(e){return e.films})).currentMovie;return Object(n.useEffect)((function(){var c=e.match.params.id;t(function(e){return function(){var t=Object(_.a)(p.a.mark((function t(c){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.get("https://yts.mx/api/v2/movie_details.json?movie_id=".concat(e));case 3:n=t.sent,c(T(n.data.data.movie)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),c(F(!0));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(c))}),[]),Object(j.jsx)(n.Fragment,{children:c?Object(j.jsxs)("div",{children:[Object(j.jsx)(h,{title:Object(j.jsx)(s.b,{className:"link",to:"/",children:c.title_english}),nav:Object(j.jsx)(s.c,{to:"/",children:Object(j.jsx)("button",{className:"back",children:Object(j.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(j.jsx)("path",{d:"M6.68981 13.7414L2.28356 8.69754L6.68981 3.6537C7.04588 3.24565 7.00434 2.62601 6.5963 2.26962C6.18825 1.91355 5.56894 1.95541 5.21222 2.36313L0.242297 8.0524C-0.0807656 8.42187 -0.0807656 8.97349 0.242297 9.34296L5.21227 15.0323C5.40647 15.2539 5.6782 15.3678 5.95153 15.3678C6.18042 15.3678 6.41025 15.288 6.5963 15.1255C7.00439 14.7691 7.0462 14.1494 6.68981 13.7414Z",fill:"white"}),Object(j.jsx)("path",{d:"M16.8717 7.71655H0.980906C0.439125 7.71655 0 8.15563 0 8.69746C0 9.23924 0.439125 9.67837 0.980906 9.67837H16.8717C19.7206 9.67837 22.0382 11.9959 22.0382 14.8445C22.0382 17.6931 19.7206 20.0106 16.8717 20.0106H2.28881C1.74703 20.0106 1.30791 20.4498 1.30791 20.9916C1.30791 21.5333 1.74703 21.9725 2.28881 21.9725H16.8717C20.8019 21.9725 24 18.7747 24 14.8445C24 10.9143 20.8022 7.71655 16.8717 7.71655Z",fill:"white"})]})})})}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"more",children:Object(j.jsxs)("div",{className:"film",children:[Object(j.jsxs)("div",{className:"film__img",children:[Object(j.jsx)("img",{src:c.large_cover_image,alt:"film"}),Object(j.jsxs)("div",{className:"film__img-rating",children:[Object(j.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(j.jsx)("g",{clipPath:"url(#clip0)",children:Object(j.jsx)("path",{d:"M19.9479 7.67185C19.8169 7.26687 19.4577 6.97923 19.0328 6.94093L13.2602 6.41678L10.9776 1.07408C10.8093 0.682532 10.426 0.429077 10.0001 0.429077C9.57422 0.429077 9.19091 0.682532 9.0226 1.075L6.73998 6.41678L0.966514 6.94093C0.542309 6.98015 0.184023 7.26687 0.0523365 7.67185C-0.0793503 8.07683 0.0422654 8.52102 0.363166 8.80103L4.72653 12.6277L3.43987 18.2954C3.34573 18.7122 3.50747 19.1429 3.85325 19.3929C4.0391 19.5272 4.25655 19.5955 4.47582 19.5955C4.66488 19.5955 4.85242 19.5446 5.02073 19.4438L10.0001 16.4679L14.9776 19.4438C15.3419 19.663 15.801 19.643 16.146 19.3929C16.492 19.1422 16.6536 18.7113 16.5594 18.2954L15.2728 12.6277L19.6361 8.80179C19.957 8.52102 20.0796 8.07759 19.9479 7.67185Z",fill:"#299DED"})}),Object(j.jsx)("defs",{children:Object(j.jsx)("clipPath",{id:"clip0",children:Object(j.jsx)("rect",{width:"20",height:"20",fill:"white"})})})]}),c.rating]})]}),Object(j.jsxs)("div",{className:"film__info",children:[Object(j.jsx)("p",{className:"film__info-title",children:c.title_english}),Object(j.jsx)("p",{className:"film__info-year",children:c.year}),Object(j.jsx)(j.Fragment,{children:c.genres.map((function(e,t){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(j.jsx)("circle",{cx:"6.5",cy:"6.5",r:"6.5",fill:"#606365"})}),Object(j.jsx)("span",{className:"film__info-genres",children:e},t)," "]})}))}),Object(j.jsx)("p",{className:"film__info-synonpsis",children:"Synonpsis"}),Object(j.jsx)("div",{className:"film__info-description",children:c.description_intro}),Object(j.jsx)("p",{className:"film__info-synonpsis",children:"Comments"}),Object(j.jsx)(Z,{filmId:c.id})]})]})})})]}):Object(j.jsx)(v,{})})};var U=function(){return Object(j.jsx)(s.a,{children:Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{exact:!0,path:"/",component:H}),Object(j.jsx)(l.b,{path:"/cart/:id",component:J}),Object(j.jsx)(l.a,{to:"/"})]})})},V=c(13),A=c(36),G=Object(V.b)({films:k}),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.c,Y=Object(V.d)(G,X(Object(V.a)(A.a)));r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(f.a,{store:Y,children:Object(j.jsx)(U,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.e9f12b0d.chunk.js.map